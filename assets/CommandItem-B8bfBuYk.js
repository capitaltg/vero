import{j as N}from"./jsx-runtime-BO8uF4Og.js";import{c as G}from"./utils-CytzSlOG.js";import{r as l}from"./index-D4H_InIO.js";import{P as R}from"./index-C1hSi-0V.js";import{c as Me}from"./createLucideIcon-B89bYmoG.js";import{R as $e,P as De,O as Fe,C as _e}from"./index-D9Bpvn5I.js";import{u as P}from"./index-DsCZslo7.js";import{c as L}from"./index-D8GmRN1t.js";/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=Me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var fe=1,qe=.9,Ke=.8,Le=.17,ee=.1,te=.999,Ve=.9999,Oe=.99,Be=/[\\\/_+.#"@\[\(\{&]/,Ge=/[\\\/_+.#"@\[\(\{&]/g,ze=/[\s-]/,he=/[\s-]/g;function ne(e,n,r,m,o,c,d){if(c===n.length)return o===e.length?fe:Oe;var f=`${o},${c}`;if(d[f]!==void 0)return d[f];for(var b=m.charAt(c),i=r.indexOf(b,o),v=0,h,I,w,S;i>=0;)h=ne(e,n,r,m,i+1,c+1,d),h>v&&(i===o?h*=fe:Be.test(e.charAt(i-1))?(h*=Ke,w=e.slice(o,i-1).match(Ge),w&&o>0&&(h*=Math.pow(te,w.length))):ze.test(e.charAt(i-1))?(h*=qe,S=e.slice(o,i-1).match(he),S&&o>0&&(h*=Math.pow(te,S.length))):(h*=Le,o>0&&(h*=Math.pow(te,i-o))),e.charAt(i)!==n.charAt(c)&&(h*=Ve)),(h<ee&&r.charAt(i-1)===m.charAt(c+1)||m.charAt(c+1)===m.charAt(c)&&r.charAt(i-1)!==m.charAt(c))&&(I=ne(e,n,r,m,i+1,c+2,d),I*ee>h&&(h=I*ee)),h>v&&(v=h),i=r.indexOf(b,i+1);return d[f]=v,v}function pe(e){return e.toLowerCase().replace(he," ")}function Ue(e,n,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,ne(e,n,pe(e),pe(n),0,0,{})}var K='[cmdk-group=""]',re='[cmdk-group-items=""]',He='[cmdk-group-heading=""]',ge='[cmdk-item=""]',ve=`${ge}:not([aria-disabled="true"])`,le="cmdk-item-select",F="data-value",Te=(e,n,r)=>Ue(e,n,r),be=l.createContext(void 0),V=()=>l.useContext(be),ye=l.createContext(void 0),ae=()=>l.useContext(ye),xe=l.createContext(void 0),we=l.forwardRef((e,n)=>{let r=_(()=>{var t,u;return{search:"",value:(u=(t=e.value)!=null?t:e.defaultValue)!=null?u:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),m=_(()=>new Set),o=_(()=>new Map),c=_(()=>new Map),d=_(()=>new Set),f=ke(e),{label:b,children:i,value:v,onValueChange:h,filter:I,shouldFilter:w,loop:S,disablePointerSelection:U=!1,vimBindings:j=!0,...O}=e,H=P(),oe=P(),T=P(),M=l.useRef(null),y=lt();$(()=>{if(v!==void 0){let t=v.trim();r.current.value=t,k.emit()}},[v]),$(()=>{y(6,ue)},[]);let k=l.useMemo(()=>({subscribe:t=>(d.current.add(t),()=>d.current.delete(t)),snapshot:()=>r.current,setState:(t,u,s)=>{var a,p,g,E;if(!Object.is(r.current[t],u)){if(r.current[t]=u,t==="search")Y(),J(),y(1,X);else if(t==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let x=document.getElementById(T);x?x.focus():(a=document.getElementById(H))==null||a.focus()}if(y(7,()=>{var x;r.current.selectedItemId=(x=D())==null?void 0:x.id,k.emit()}),s||y(5,ue),((p=f.current)==null?void 0:p.value)!==void 0){let x=u??"";(E=(g=f.current).onValueChange)==null||E.call(g,x);return}}k.emit()}},emit:()=>{d.current.forEach(t=>t())}}),[]),W=l.useMemo(()=>({value:(t,u,s)=>{var a;u!==((a=c.current.get(t))==null?void 0:a.value)&&(c.current.set(t,{value:u,keywords:s}),r.current.filtered.items.set(t,ie(u,s)),y(2,()=>{J(),k.emit()}))},item:(t,u)=>(m.current.add(t),u&&(o.current.has(u)?o.current.get(u).add(t):o.current.set(u,new Set([t]))),y(3,()=>{Y(),J(),r.current.value||X(),k.emit()}),()=>{c.current.delete(t),m.current.delete(t),r.current.filtered.items.delete(t);let s=D();y(4,()=>{Y(),(s==null?void 0:s.getAttribute("id"))===t&&X(),k.emit()})}),group:t=>(o.current.has(t)||o.current.set(t,new Set),()=>{c.current.delete(t),o.current.delete(t)}),filter:()=>f.current.shouldFilter,label:b||e["aria-label"],getDisablePointerSelection:()=>f.current.disablePointerSelection,listId:H,inputId:T,labelId:oe,listInnerRef:M}),[]);function ie(t,u){var s,a;let p=(a=(s=f.current)==null?void 0:s.filter)!=null?a:Te;return t?p(t,r.current.search,u):0}function J(){if(!r.current.search||f.current.shouldFilter===!1)return;let t=r.current.filtered.items,u=[];r.current.filtered.groups.forEach(a=>{let p=o.current.get(a),g=0;p.forEach(E=>{let x=t.get(E);g=Math.max(x,g)}),u.push([a,g])});let s=M.current;q().sort((a,p)=>{var g,E;let x=a.getAttribute("id"),B=p.getAttribute("id");return((g=t.get(B))!=null?g:0)-((E=t.get(x))!=null?E:0)}).forEach(a=>{let p=a.closest(re);p?p.appendChild(a.parentElement===p?a:a.closest(`${re} > *`)):s.appendChild(a.parentElement===s?a:a.closest(`${re} > *`))}),u.sort((a,p)=>p[1]-a[1]).forEach(a=>{var p;let g=(p=M.current)==null?void 0:p.querySelector(`${K}[${F}="${encodeURIComponent(a[0])}"]`);g==null||g.parentElement.appendChild(g)})}function X(){let t=q().find(s=>s.getAttribute("aria-disabled")!=="true"),u=t==null?void 0:t.getAttribute(F);k.setState("value",u||void 0)}function Y(){var t,u,s,a;if(!r.current.search||f.current.shouldFilter===!1){r.current.filtered.count=m.current.size;return}r.current.filtered.groups=new Set;let p=0;for(let g of m.current){let E=(u=(t=c.current.get(g))==null?void 0:t.value)!=null?u:"",x=(a=(s=c.current.get(g))==null?void 0:s.keywords)!=null?a:[],B=ie(E,x);r.current.filtered.items.set(g,B),B>0&&p++}for(let[g,E]of o.current)for(let x of E)if(r.current.filtered.items.get(x)>0){r.current.filtered.groups.add(g);break}r.current.filtered.count=p}function ue(){var t,u,s;let a=D();a&&(((t=a.parentElement)==null?void 0:t.firstChild)===a&&((s=(u=a.closest(K))==null?void 0:u.querySelector(He))==null||s.scrollIntoView({block:"nearest"})),a.scrollIntoView({block:"nearest"}))}function D(){var t;return(t=M.current)==null?void 0:t.querySelector(`${ge}[aria-selected="true"]`)}function q(){var t;return Array.from(((t=M.current)==null?void 0:t.querySelectorAll(ve))||[])}function Q(t){let u=q()[t];u&&k.setState("value",u.getAttribute(F))}function Z(t){var u;let s=D(),a=q(),p=a.findIndex(E=>E===s),g=a[p+t];(u=f.current)!=null&&u.loop&&(g=p+t<0?a[a.length-1]:p+t===a.length?a[0]:a[p+t]),g&&k.setState("value",g.getAttribute(F))}function ce(t){let u=D(),s=u==null?void 0:u.closest(K),a;for(;s&&!a;)s=t>0?rt(s,K):nt(s,K),a=s==null?void 0:s.querySelector(ve);a?k.setState("value",a.getAttribute(F)):Z(t)}let de=()=>Q(q().length-1),se=t=>{t.preventDefault(),t.metaKey?de():t.altKey?ce(1):Z(1)},me=t=>{t.preventDefault(),t.metaKey?Q(0):t.altKey?ce(-1):Z(-1)};return l.createElement(R.div,{ref:n,tabIndex:-1,...O,"cmdk-root":"",onKeyDown:t=>{var u;(u=O.onKeyDown)==null||u.call(O,t);let s=t.nativeEvent.isComposing||t.keyCode===229;if(!(t.defaultPrevented||s))switch(t.key){case"n":case"j":{j&&t.ctrlKey&&se(t);break}case"ArrowDown":{se(t);break}case"p":case"k":{j&&t.ctrlKey&&me(t);break}case"ArrowUp":{me(t);break}case"Home":{t.preventDefault(),Q(0);break}case"End":{t.preventDefault(),de();break}case"Enter":{t.preventDefault();let a=D();if(a){let p=new Event(le);a.dispatchEvent(p)}}}}},l.createElement("label",{"cmdk-label":"",htmlFor:W.inputId,id:W.labelId,style:ot},b),z(e,t=>l.createElement(ye.Provider,{value:k},l.createElement(be.Provider,{value:W},t))))}),We=l.forwardRef((e,n)=>{var r,m;let o=P(),c=l.useRef(null),d=l.useContext(xe),f=V(),b=ke(e),i=(m=(r=b.current)==null?void 0:r.forceMount)!=null?m:d==null?void 0:d.forceMount;$(()=>{if(!i)return f.item(o,d==null?void 0:d.id)},[i]);let v=Ee(o,c,[e.value,e.children,c],e.keywords),h=ae(),I=A(y=>y.value&&y.value===v.current),w=A(y=>i||f.filter()===!1?!0:y.search?y.filtered.items.get(o)>0:!0);l.useEffect(()=>{let y=c.current;if(!(!y||e.disabled))return y.addEventListener(le,S),()=>y.removeEventListener(le,S)},[w,e.onSelect,e.disabled]);function S(){var y,k;U(),(k=(y=b.current).onSelect)==null||k.call(y,v.current)}function U(){h.setState("value",v.current,!0)}if(!w)return null;let{disabled:j,value:O,onSelect:H,forceMount:oe,keywords:T,...M}=e;return l.createElement(R.div,{ref:L(c,n),...M,id:o,"cmdk-item":"",role:"option","aria-disabled":!!j,"aria-selected":!!I,"data-disabled":!!j,"data-selected":!!I,onPointerMove:j||f.getDisablePointerSelection()?void 0:U,onClick:j?void 0:S},e.children)}),Je=l.forwardRef((e,n)=>{let{heading:r,children:m,forceMount:o,...c}=e,d=P(),f=l.useRef(null),b=l.useRef(null),i=P(),v=V(),h=A(w=>o||v.filter()===!1?!0:w.search?w.filtered.groups.has(d):!0);$(()=>v.group(d),[]),Ee(d,f,[e.value,e.heading,b]);let I=l.useMemo(()=>({id:d,forceMount:o}),[o]);return l.createElement(R.div,{ref:L(f,n),...c,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},r&&l.createElement("div",{ref:b,"cmdk-group-heading":"","aria-hidden":!0,id:i},r),z(e,w=>l.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?i:void 0},l.createElement(xe.Provider,{value:I},w))))}),Xe=l.forwardRef((e,n)=>{let{alwaysRender:r,...m}=e,o=l.useRef(null),c=A(d=>!d.search);return!r&&!c?null:l.createElement(R.div,{ref:L(o,n),...m,"cmdk-separator":"",role:"separator"})}),Ye=l.forwardRef((e,n)=>{let{onValueChange:r,...m}=e,o=e.value!=null,c=ae(),d=A(i=>i.search),f=A(i=>i.selectedItemId),b=V();return l.useEffect(()=>{e.value!=null&&c.setState("search",e.value)},[e.value]),l.createElement(R.input,{ref:n,...m,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":b.listId,"aria-labelledby":b.labelId,"aria-activedescendant":f,id:b.inputId,type:"text",value:o?e.value:d,onChange:i=>{o||c.setState("search",i.target.value),r==null||r(i.target.value)}})}),Qe=l.forwardRef((e,n)=>{let{children:r,label:m="Suggestions",...o}=e,c=l.useRef(null),d=l.useRef(null),f=A(i=>i.selectedItemId),b=V();return l.useEffect(()=>{if(d.current&&c.current){let i=d.current,v=c.current,h,I=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let w=i.offsetHeight;v.style.setProperty("--cmdk-list-height",w.toFixed(1)+"px")})});return I.observe(i),()=>{cancelAnimationFrame(h),I.unobserve(i)}}},[]),l.createElement(R.div,{ref:L(c,n),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":f,"aria-label":m,id:b.listId},z(e,i=>l.createElement("div",{ref:L(d,b.listInnerRef),"cmdk-list-sizer":""},i)))}),Ze=l.forwardRef((e,n)=>{let{open:r,onOpenChange:m,overlayClassName:o,contentClassName:c,container:d,...f}=e;return l.createElement($e,{open:r,onOpenChange:m},l.createElement(De,{container:d},l.createElement(Fe,{"cmdk-overlay":"",className:o}),l.createElement(_e,{"aria-label":e.label,"cmdk-dialog":"",className:c},l.createElement(we,{ref:n,...f}))))}),et=l.forwardRef((e,n)=>A(r=>r.filtered.count===0)?l.createElement(R.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),tt=l.forwardRef((e,n)=>{let{progress:r,children:m,label:o="Loading...",...c}=e;return l.createElement(R.div,{ref:n,...c,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},z(e,d=>l.createElement("div",{"aria-hidden":!0},d)))}),C=Object.assign(we,{List:Qe,Item:We,Input:Ye,Group:Je,Separator:Xe,Dialog:Ze,Empty:et,Loading:tt});function rt(e,n){let r=e.nextElementSibling;for(;r;){if(r.matches(n))return r;r=r.nextElementSibling}}function nt(e,n){let r=e.previousElementSibling;for(;r;){if(r.matches(n))return r;r=r.previousElementSibling}}function ke(e){let n=l.useRef(e);return $(()=>{n.current=e}),n}var $=typeof window>"u"?l.useEffect:l.useLayoutEffect;function _(e){let n=l.useRef();return n.current===void 0&&(n.current=e()),n}function A(e){let n=ae(),r=()=>e(n.snapshot());return l.useSyncExternalStore(n.subscribe,r,r)}function Ee(e,n,r,m=[]){let o=l.useRef(),c=V();return $(()=>{var d;let f=(()=>{var i;for(let v of r){if(typeof v=="string")return v.trim();if(typeof v=="object"&&"current"in v)return v.current?(i=v.current.textContent)==null?void 0:i.trim():o.current}})(),b=m.map(i=>i.trim());c.value(e,f,b),(d=n.current)==null||d.setAttribute(F,f),o.current=f}),o}var lt=()=>{let[e,n]=l.useState(),r=_(()=>new Map);return $(()=>{r.current.forEach(m=>m()),r.current=new Map},[e]),(m,o)=>{r.current.set(m,o),n({})}};function at(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function z({asChild:e,children:n},r){return e&&l.isValidElement(n)?l.cloneElement(at(n),{ref:n.ref},r(n.props.children)):r(n)}var ot={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Ie=l.forwardRef(({className:e,...n},r)=>N.jsx(C,{ref:r,className:G("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...n}));Ie.displayName=C.displayName;Ie.__docgenInfo={description:"",methods:[]};const it=R.div,Ce="px-3 py-2.5 text-sm",Re=l.forwardRef((e,n)=>N.jsx(C.Empty,{ref:n,className:Ce,...e}));Re.displayName=C.Empty.displayName;const Se=l.forwardRef((e,n)=>N.jsx(it,{ref:n,className:Ce,...e,"cmdk-empty":"",role:"presentation"}));Se.displayName="CommandForceEmpty";Re.__docgenInfo={description:"",methods:[]};Se.__docgenInfo={description:`Same as above but without special show/hide logic based on filtered count
ref: https://github.com/pacocoursey/cmdk/blob/main/cmdk/src/index.tsx#L896-L904`,methods:[],displayName:"CommandForceEmpty"};const Ne=l.forwardRef(({className:e,...n},r)=>N.jsx(C.Group,{ref:r,className:G("overflow-hidden px-1 py-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...n}));Ne.displayName=C.Group.displayName;Ne.__docgenInfo={description:"",methods:[]};const Ae=l.forwardRef(({className:e,...n},r)=>N.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[N.jsx(Pe,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),N.jsx(C.Input,{ref:r,className:G("flex h-11 w-full rounded-sm bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...n})]}));Ae.displayName=C.Input.displayName;Ae.__docgenInfo={description:"",methods:[]};const je=l.forwardRef(({className:e,...n},r)=>N.jsx(C.Item,{ref:r,className:G("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-disabled:pointer-events-none aria-disabled:opacity-50 aria-selected:bg-accent aria-selected:text-accent-foreground",e),...n}));je.displayName=C.Item.displayName;je.__docgenInfo={description:"",methods:[]};export{Ie as C,C as _,Ae as a,Re as b,Ne as c,je as d,Se as e};
