import{j as t}from"./jsx-runtime-BO8uF4Og.js";import{u as M}from"./useAriaDisabled-DHTVgRPt.js";import{s as g}from"./styles-Bqt2ynIu.js";import{a as u}from"./utils-CU3My8Oi.js";import{g as R}from"./z-index-CmEG1ohp.js";import{R as A,r as p}from"./index-D4H_InIO.js";import{b as O}from"./constants-C4w3S9le.js";import{C as V,a as W,b as _,c as K,d as z}from"./CommandItem-CiFaxsn-.js";import{C as F,a as L}from"./CommandList-DmlIjmFM.js";import{P as Z,a as G,b as U}from"./Popover-OaSsjRLr.js";import{C as X}from"./check-CT0OM3mY.js";import{X as $}from"./x-B9-lGSIk.js";const b=A.forwardRef(({options:f,value:r,onChange:l,placeholder:j="Select items...",searchPlaceholder:w="Search items...",emptyMessage:v="No items found",className:N,listClassName:T,zIndex:C,isDisabled:m=!1,name:h,required:y,autoFocus:x,...q},i)=>{const[n,o]=p.useState(!1),k=R("dropdown",C),S=r.map(e=>{var s;return((s=f.find(a=>a.value===e))==null?void 0:s.label)||e}),P=M({isDisabled:m}),c=p.useRef(null);p.useEffect(()=>{x&&c.current&&c.current.focus()},[x]);const D=()=>r.length===0?t.jsx("span",{className:"self-center text-muted-foreground",children:j}):t.jsx("div",{className:"flex flex-1 flex-wrap gap-1",children:S.map((e,s)=>t.jsxs("div",{className:`flex items-center gap-1 rounded-sm bg-secondary px-2 py-0.5 text-sm
                text-secondary-foreground`,children:[e,t.jsx("button",{"aria-label":`Remove ${e}`,className:`ml-0.5 rounded-full opacity-50 transition-opacity hover:opacity-100
                  focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-primary-400
                  focus:ring-offset-1`,type:"button",onClick:a=>{a.stopPropagation(),l(r.filter((I,d)=>d!==s))},onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),a.stopPropagation(),l(r.filter((I,d)=>d!==s)))},children:t.jsx($,{className:"h-3 w-3",strokeWidth:3})})]},r[s]))}),E=e=>{if(m){if(e.key==="Tab"||e.key==="Escape")return;e.preventDefault(),e.stopPropagation();return}e.key==="Enter"||e.key===" "?(e.preventDefault(),o(!n)):e.key==="Escape"&&n&&(e.preventDefault(),o(!1))};return t.jsxs(t.Fragment,{children:[h||y?t.jsx("input",{name:h,required:y,type:"hidden",value:r.join(",")}):null,t.jsxs(Z,{open:n,onOpenChange:o,children:[t.jsx(G,{asChild:!0,children:t.jsxs("div",{ref:e=>{typeof i=="function"?i(e):i&&(i.current=e),c.current=e},"aria-expanded":n,"aria-haspopup":"listbox",className:u(g.button,O({variant:"input"}),g.focusRing,"flex h-auto min-h-[2.5rem] w-full items-stretch justify-between px-3 py-1.5",N),role:"button",tabIndex:0,onClick:e=>{e.stopPropagation(),m||o(!n)},onKeyDown:E,...P,...q,children:[t.jsx("div",{className:"flex flex-1 text-left",children:D()}),t.jsx(F,{className:"ml-2 h-4 w-4 shrink-0 self-center opacity-50"})]})}),t.jsx(U,{align:"start",className:"w-[--radix-popover-trigger-width] px-0 py-0",zIndex:k,children:t.jsxs(V,{children:[t.jsx(W,{placeholder:w}),t.jsxs(L,{className:u("max-h-[16.5rem] overflow-y-auto",T),children:[t.jsx(_,{children:v}),t.jsx(K,{children:f.map(e=>t.jsx(z,{value:e.value,onSelect:()=>{l(r.includes(e.value)?r.filter(s=>s!==e.value):[...r,e.value])},children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:u(`mr-2 flex h-4 w-4 items-center justify-center rounded-sm border
                            border-primary-400`,r.includes(e.value)?"bg-primary-400 text-white":"opacity-50"),children:r.includes(e.value)?t.jsx(X,{className:"h-3 w-3",strokeWidth:3}):null}),e.label]})},e.value))})]})]})})]})]})});b.displayName="MultiSelect";b.__docgenInfo={description:"",methods:[],displayName:"MultiSelect",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"MultiSelectOption"}],raw:"MultiSelectOption[]"},description:""},value:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"value"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Select items...'",computed:!1}},searchPlaceholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Search items...'",computed:!1}},emptyMessage:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'No items found'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},listClassName:{required:!1,tsType:{name:"string"},description:""},zIndex:{required:!1,tsType:{name:"number"},description:""},isDisabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},name:{required:!1,tsType:{name:"string"},description:`The name attribute for form submission.
This is required for the multi-select value to be included in form data.`},required:{required:!1,tsType:{name:"boolean"},description:`Whether the multi-select is required for form validation.
When true, the form cannot be submitted without at least one selection.`},autoFocus:{required:!1,tsType:{name:"boolean"},description:"Automatically focuses the multi-select when the page loads."}},composes:["Omit","MultiSelectFormAttributes"]};export{b as M};
